method = {'L': [[15, 6], [15, 29], [15, 24], [12, 3], [12, 32], [12, 21], [9, 0], [9, 35], [9, 18], [44, 38], [44, 36], [44, 42], [41, 37], [41, 39], [41, 43]],
'R': [[17, 26], [17, 27], [17, 8], [14, 23], [14, 30], [14, 5], [11, 20], [11, 33], [11, 2], [51, 53], [51, 47], [51, 45], [48, 52], [48, 50], [48, 46]],
'U': [[9, 45], [9, 27], [9, 36], [10, 46], [10, 28], [10, 37], [11, 47], [11, 29], [11, 38], [6, 8], [6, 2], [6, 0], [7, 5], [7, 1], [7, 3]],
'D': [[15, 42], [15, 33], [15, 51], [16, 43], [16, 34], [16, 52], [17, 44], [17, 35], [17, 53], [24, 26], [24, 20], [24, 18], [25, 23], [25, 19], [25, 21]],
'F': [[6, 44], [6, 20], [6, 45], [7, 41], [7, 19], [7, 48], [8, 38], [8, 18], [8, 51], [9, 15], [9, 17], [9, 11], [16, 14], [16, 10], [16, 12]],
'B': [[0, 47], [0, 26], [0, 42], [1, 50], [1, 25], [1, 39], [2, 53], [2, 24], [2, 36], [33, 35], [33, 29], [33, 27], [34, 32], [34, 28], [34, 30]]}

for _ in range(int(input())):
 cube = list('wwwwwwwwwrrrrrrrrryyyyyyyyyooooooooogggggggggbbbbbbbbb')
 n = input()
 for a in input().split():
  m = method[a[0]]
  if a[1] == '+': m = m[::-1]
  for i in m:
   x, y = i[0], i[1]
   cube[x], cube[y] = cube[y], cube[x]
 print(cube[0] + cube[1] + cube[2])
 print(cube[3] + cube[4] + cube[5])
 print(cube[6] + cube[7] + cube[8])
